## ADDED Requirements

### Requirement: 必要人数を下回る日・時間帯を自動検出する
システムは、各日・各時間帯において、希望休または未アサインにより必要人数を満たせない状況を自動検出しなければならない（SHALL）。

#### Scenario: 希望休により必要人数を下回る場合を検出する
- **WHEN** 特定の日・時間帯において、希望休登録済みスタッフを除いた出勤可能人数が必要人数を下回る
- **THEN** その日・時間帯が「人数不足」状態として検出される

#### Scenario: 必要人数を満たしている場合は検出されない
- **WHEN** 特定の日・時間帯において、出勤可能な人数が必要人数以上である
- **THEN** その日・時間帯は「人数不足」状態にならない

---

### Requirement: ヘルプスタッフの必要有無をシフト表に表示する
システムは、人数不足が検出された日・時間帯に「ヘルプスタッフ要」の表示をシフト表内またはアラートとして表示しなければならない（SHALL）。

#### Scenario: 人数不足の日・時間帯にヘルプアラートが表示される
- **WHEN** ある日の特定の時間帯で人数不足が検出される
- **THEN** シフト表のその日・時間帯の欄に「ヘルプ要」などのアラートアイコンまたはバッジが表示される

#### Scenario: 人数不足がない場合はヘルプアラートが表示されない
- **WHEN** すべての日・時間帯で必要人数が満たされている
- **THEN** ヘルプアラートは一切表示されない

---

### Requirement: 不足人数を表示する
システムは、人数不足が検出された日・時間帯において、不足している人数（必要人数 − 出勤確定人数）を表示できなければならない（SHALL）。

#### Scenario: 不足人数が正しく表示される
- **WHEN** ある日の時間帯で必要人数3に対して出勤確定人数が1の場合
- **THEN** 「ヘルプ2名必要」などの不足人数が表示される

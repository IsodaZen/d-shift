# shift-schedule-view Delta Spec（ヘルプスタッフのシフト表表示）

この仕様は `openspec/specs/shift-schedule-view/spec.md` の拡張仕様である。

**追加する要件:**
- ヘルプスタッフのアサインを通常スタッフとは別のセクションとしてシフト表に表示する

---

## ADDED Requirements

### Requirement: ヘルプスタッフのアサインをシフト表に表示する

システムは、シフト表の通常スタッフ行の下にヘルプスタッフセクションを設け、各ヘルプスタッフのアサイン状況を表示できなければならない（SHALL）。ヘルプスタッフが1件も登録されていない場合はセクション自体を表示しない。

ヘルプスタッフセクションの表示仕様:
- 通常スタッフ行の後ろに「ヘルプスタッフ」のセクション区切り行を表示する
- 区切り行の後にヘルプスタッフ1名につき1行を表示する
- 各行の左端（固定列）にはヘルプスタッフの氏名を表示する
- 各セルには、そのヘルプスタッフがその日に割り当てられた時間帯バッジ（午前/午後/夕方）を表示する
- 希望休ハイライトは表示しない（ヘルプスタッフは希望休エンティティを持たない）
- 駐車場番号は通常スタッフと同様に表示する

#### Scenario: ヘルプスタッフが登録されている場合にセクションが表示される

- **GIVEN** ヘルプスタッフが1名以上登録されている
- **WHEN** ユーザーがシフト表画面を開く
- **THEN** 通常スタッフ行の下に「ヘルプスタッフ」セクション区切りが表示される
- **AND** 各ヘルプスタッフの行が表示される

#### Scenario: ヘルプスタッフが0件の場合はセクションが表示されない

- **GIVEN** ヘルプスタッフが1件も登録されていない
- **WHEN** ユーザーがシフト表画面を開く
- **THEN** ヘルプスタッフセクション区切りは表示されない

#### Scenario: ヘルプスタッフのアサインバッジが表示される

- **GIVEN** ヘルプスタッフAがある日の午前にアサインされている
- **WHEN** シフト表を表示する
- **THEN** ヘルプスタッフAの行のその日のセルに「午前」バッジが表示される

---

### Requirement: ヘルプスタッフのセルをクリックして手動アサインできる

システムは、シフト表のヘルプスタッフ行のセルをクリックすることで、そのヘルプスタッフの指定日のアサインを手動で追加・削除できなければならない（SHALL）。

手動アサインの仕様:
- セルをクリックすると、時間帯選択モーダルが表示される
- モーダルにはヘルプスタッフの氏名と日付が表示される
- ヘルプスタッフの `availableSlots` に含まれない時間帯は「不可」表示になる（選択は可能）
- 週上限チェックは行わない（ヘルプスタッフには週上限の概念がない）

#### Scenario: ヘルプスタッフのセルをクリックするとモーダルが開く

- **GIVEN** ヘルプスタッフAがシフト表に表示されている
- **WHEN** ユーザーがヘルプスタッフAのある日のセルをクリックする
- **THEN** 時間帯選択モーダルがヘルプスタッフAの氏名と日付とともに表示される

#### Scenario: モーダルで時間帯をトグルしてアサインを追加できる

- **GIVEN** ヘルプスタッフAの時間帯選択モーダルが表示されている
- **AND** 午前がアサインされていない状態である
- **WHEN** ユーザーが「午前」ボタンをタップする
- **THEN** ヘルプスタッフAのその日の午前にアサインが追加される

#### Scenario: モーダルで時間帯をトグルしてアサインを削除できる

- **GIVEN** ヘルプスタッフAの時間帯選択モーダルが表示されている
- **AND** 午前がアサインされている状態である
- **WHEN** ユーザーが「午前」ボタンをタップする
- **THEN** ヘルプスタッフAのその日の午前のアサインが削除される

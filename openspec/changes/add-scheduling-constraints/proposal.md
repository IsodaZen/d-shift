## Why

現在の自動アサインアルゴリズムは、各日・各時間帯を独立して処理するため、以下の2つの問題が発生する。

1. **全時間帯出勤の原則が未適用**: 午前・午後両方に対応できるスタッフが、午後のみアサインされる場合がある。実際の運用ではスタッフが出勤する日には対応可能な全時間帯に入るべきであり、午前のみ・午後のみという中途半端なアサインは業務運用上許容されない。

2. **必要人数超過の制御がない**: 各時間帯を独立して処理するため、あるスタッフをある時間帯に入れた結果、他の時間帯が必要人数を超えてしまうケースが考慮されていない。

## What Changes

### 制約1: 全時間帯出勤の原則（強制制約）

あるスタッフをある日に出勤させる場合、そのスタッフが出勤可能な**全ての時間帯**にアサインしなければならない。

- **禁止例**: 午前・午後対応可のスタッフを午後のみにアサイン
- **正しい例**: 午前・午後対応可のスタッフは、その日に出勤するなら午前・午後の両方にアサイン

アルゴリズムの変更点:
- 現在の「日×時間帯」単位の処理を「日」単位の処理に変更する
- 各日に対して「出勤させるスタッフセット」を決定し、そのスタッフの全利用可能時間帯にまとめてアサインする

### 制約2: 必要人数超過の禁止（強制制約・例外あり）

各日・各時間帯に対して、アサイン人数が必要人数（requiredCount）を超えてはならない。

**例外（許容される超過）**: ある時間帯のスタッフが不足しており、制約1（全時間帯出勤の原則）を適用することで別の時間帯が必要人数を超える場合は許容する。ただしその場合でも**超過人数が最小となるよう**スタッフ数を最小化する。

アルゴリズムの変更点:
- 各日のスタッフ選択において、「まだ必要数が埋まっていない時間帯に貢献できるスタッフ」のみを追加する
- 全時間帯が既に満たされている場合は、それ以上スタッフを追加しない

## Capabilities

### Modified Capabilities

- `auto-shift-generation`: 自動アサインアルゴリズムに2つの強制制約を追加する
  - 全時間帯出勤の原則: 出勤日には利用可能な全時間帯にアサイン
  - 必要人数超過の禁止（例外あり）: 超過を最小化しつつ必要人数を充足

## Impact

### 変更ファイル（既存）

| ファイル | 変更内容 |
|---|---|
| `src/utils/autoShiftGenerator.ts` | アルゴリズムを「日」単位処理に変更し、2つの制約を実装 |
| `src/utils/autoShiftGenerator.test.ts` | 新制約に対応するテストケースを追加（TDD: Redフェーズ先行） |
